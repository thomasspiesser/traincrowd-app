<template name="courses">
  <div class="container" >
    <div class="row">
        {{#each courses}}
        <div class="col-lg-8 col-lg-offset-2">
            {{> coursePreview}}
        </div>
        {{/each}}
    </div>
  </div>
</template>

<!--  /////////////////////////////////////////////////// --> 

<template name="coursePreview">
  <div class="all-courses-wrapper">
    <div class="row">

      <div class="col-md-3 col-preview-image">
        <div class="course-preview-image">
          {{#if imageId}}
            <a href="{{ pathFor route='course.show' _id=this._id }}"><img src="{{image imageId}}" class=""></a>
          {{else}}
            {{#if trainerImageId owner}}
              {{#with trainerImageId owner}}
                <a href="{{ pathFor route='course.show' _id=../_id }}"><img src="{{image this}}" alt="" class=""></a>
              {{/with}}
            {{else}}
              <a href="{{ pathFor route='course.show' _id=this._id }}"><img src="/iconTeach.png" class=""></a>
            {{/if}}
          {{/if}}
        </div>
      </div>

      <div class="col-md-9">
        <div class="course-preview-content">

          <a href="{{ pathFor route='course.show' _id=this._id }}"><h4 class="course-title-preview">{{titlePreview}}</h4></a>


          <div class="row">
            <div class="col-md-8 col-preview-content-left">
              <a href="{{ pathFor 'userProfile.show' _id=this.owner }}">{{ownerName this.owner}}</a>
              <p class="course-description-preview">{{descriptionPreview}}</p>
            </div>
            <div class="col-md-4 col-preview-content-right">
              <div class="course-preview-item-list"><i class="fa fa-money"></i> <div class="pull-right">{{feePP}} <i class="fa fa-euro"></i> </div></div>
              <div class="course-preview-item-list"> <i class="fa fa-thumbs-up"></i> <div class="rateit course-preview-rateit pull-right" data-rateit-value="{{rating}}" data-rateit-ispreset="true" data-rateit-readonly="true"></div></div>
              <div class="course-preview-item-list"><i class="fa fa-calendar"></i> <div class="pull-right">nächster termin</div>  </div>
              <div class="course-preview-item-list"><i class="fa fa-location-arrow"></i> <div class="pull-right">Berlin</div>  </div>
            </div>
          </div>

          
            

        </div>
      </div>

    </div>
  </div>
</template>

<!--  /////////////////////////////////////////////////// --> 

<template name="courseDetail">
 {{> paymentModal}}
  <div class="container">
    <div class="row">

      <div class="col-md-2 course-detail-head">
        <div class="course-detail-head-image-wrapper">
        {{#if imageId}}
          <img src="{{image imageId}}" alt="{{title}}" class="img-responsive img-circle">
        {{else}}
          {{#if trainerImageId owner}}
            {{#with trainerImageId owner}}
              <img src="{{image this}}" alt="" class="img-responsive img-circle">
            {{/with}}
          {{else}}
            <img src="/iconTeach.png" alt="" class="img-responsive img-circle">
          {{/if}}
        {{/if}}
        </div>
      </div>

      <div class="col-md-7 course-detail-head">
        <div class="course-detail-head-text-wrapper">
        {{#if canEdit owner}}
          <button type="submit" class="btn btn-sm pull-right" id="editCourseButton"> <span class="fa fa-pencil"></span> Bearbeiten</button>
        {{/if}}
          <p><a href="{{ pathFor 'userProfile.show' _id = owner }}">{{ownerName owner}}</a></p>
          <h3 class="course-title-detail">{{title}}</h3>
          <p class="course-detail-head-categories">
            {{#each categories}}
              <span class="label label-default tags">{{this}}</span> 
            {{/each}}
          </p>
          <p><span class="rateit" data-rateit-value="{{rating}}" data-rateit-ispreset="true" data-rateit-readonly="true"></span></p>
        </div>
<!--         {{#if canEdit course.owner}}
          <div>Course inquiries (course owner only)</div>
          <hr>
          {{#each inquired}}
            <form class="form-inline" role="form">
              {{#each inquiredDates}}
                <label class="radio-inline">
                  <input type="radio" name="{{../_id}}" value="{{this}}"> {{this}}
                </label>
              {{/each}}
              <button type="button" class="btn btn-success confirmDateButton">Confirm</button>
              <button type="button" class="btn btn-danger declineDateButton">Decline</button>
            </form>
            <hr>
          {{/each}}
        {{/if}} -->
      </div>
              
      <div class="col-md-3">
        <div class="affix">
          <!-- <button type="button" class="btn btn-danger" id="inquireCourseDatesButton">Inquire dates</button> -->
          <!-- <h4 style="text-align: center;">Jetzt Kurs buchen:</h4> -->
          <div class="row">
            <div class="col-xs-6">
              <span data-toggle="tooltip" title="Kursdauer">
              <i class="fa fa-clock-o" ></i>
                {{duration}} Tage
              </span>
            </div>
            <div class="col-xs-6">
              <span class="pull-right" data-toggle="tooltip" title="Anzahl Kursplätze">
              <i class="fa fa-user" ></i>
              {{minParticipants}}-{{maxParticipants}} Plätze
              </span>
            </div>
          </div>
          
          <hr>
          
          <div class="row">
            <div class="col-xs-12">
              <span data-toggle="tooltip" title="Kurspreis pro Person">
              <i class="fa fa-euro" ></i>
              {{feePP}} pP
              </span>
            </div>
          </div>
          
          <hr>
          
          Event auswählen:
          <div class="list-group">

            {{#each getCurrent}}
              <a href="{{#if currentUser}}#{{else}}{{pathFor 'atSignIn'}}{{/if}}" class="joinCourseButton list-group-item list-group-item-success ">
              <div class="row">
                <div class="col-xs-4">
                  {{courseDateRange}}
                </div>
                <div class="col-xs-8">
                  {{#if bookedOut ..}}
                    <div class="progress" style="margin-bottom: 0;">
                      <div class="progress-bar progress-bar-danger progress-bar-striped" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        100%
                      </div>
                    </div>
                  {{else}}
                    <div class="progress" style="margin-bottom: 0;">
                      <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="{{percentFull ..}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percentFull ..}}%; min-width: 2.2em;">
                        {{percentFull ..}}%
                      </div>
                    </div>
                  {{/if}}
                </div>
              </div>
              </a>
            {{/each}}

          </div>

          <button type="button" class="btn btn-default btn-block" id="bookCourseButton"> Jetzt Buchen</button>

        </div>

      </div>
    </div>
    <div class="row">
      <div class="col-md-2 course-detail-body-location-wrapper">
        <div id="location">
          <strong>Ort</strong>
          {{#if noLocation}}
            <p>steht noch nicht fest</p>
          {{else}}
            <p>{{street}} <br>
            {{#if streetAdditional}}<p>{{streetAdditional}}</p>{{/if}}
            {{plz}} Berlin</p>
          {{/if}}
        </div>
      </div>
      <div class="col-md-7 course-detail-body-text-wrapper">
        <div class="">
          <p><strong>Beschreibung</strong> <br>
            <div class="contain-format">{{description}}</div>
          </p>
          
          <p><strong>Kursziele</strong> <br> {{aims}}</p>
          <p><strong>Lernformen, Methodik und Didaktik</strong> <br> {{methods}}</p>
          <p><strong>Zielgruppe</strong> <br> {{targetGroup}}</p>
          <p><strong>Vorraussetzungen</strong> <br> {{prerequisites}}</p>
          <p><strong>Sprachen</strong> <br> {{languages}}</p>
          <p><strong>zusätzliche Leistungen</strong> <br> {{additionalServices}}</p>
        </div>
      </div>
    </div>
  </div>
</template>

