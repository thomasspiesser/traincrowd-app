<template name="userCourses">
  {{> ratingModal}}
  <div class="container notHome">
    {{#if hostedCourses.count}}
    <h3>Angebotene Kurse</h3>
    <table class='table table-striped'>
      <tbody>
        {{#each hostedCourses}}
          <tr>
            <td>
              {{#if logo}}
              <a href="{{ pathFor route='course.show' _id=this._id }}"><img src="{{logo}}" alt="" class="img-thumbnail img-responsive" style="height: 40px;"></a>
              {{else}}
              <a href="{{ pathFor route='course.show' _id=this._id }}"><img src="/iconTeach.png" alt="" class=" img-thumbnail img-responsive" style="height: 40px;"></a>
              {{/if}}
            </td>
            <td><a href="{{ pathFor route='course.show' _id=this._id }}">{{title}}</a></td>
            <td><span class="rateit" data-rateit-value="{{rating}}" data-rateit-ispreset="true" data-rateit-readonly="true"></span></td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    {{/if}}

    {{#if inquiredCourses}}
    <h3>Angefragte Kurse</h3>
    <table class='table table-striped'>
      <thead>
        <tr>
          <td></td>
          <td>Titel</td>
          <td>Angefragte Daten</td>
          <td>Bewertung</td>
        </tr>
      </thead>
      <tbody>
        {{#each inquiredCourses}}
          <tr>
            <td>
              {{#if logo}}
              <a href="{{ pathFor route='course.show' _id=course }}"><img src="{{logo}}" alt="" class="img-thumbnail img-responsive" style="height: 40px;"></a>
              {{else}}
              <a href="{{ pathFor route='course.show' _id=course }}"><img src="/iconTeach.png" alt="" class=" img-thumbnail img-responsive" style="height: 40px;"></a>
              {{/if}}
            </td>
            <td><a href="{{ pathFor route='course.show' _id=course }}">{{title}}</a></td>
            <td>{{inquiredDates}}</td>
            <td><span class="rateit" data-rateit-value="{{rating}}" data-rateit-ispreset="true" data-rateit-readonly="true"></span></td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    {{/if}}

    {{#if currentCourses}}
    <h3>Gebuchte Kurse</h3>
    <table class='table table-striped'>
    <thead>
        <tr>
          <td></td>
          <td>Titel</td>
          <td>Kurs Datum</td>
          <td>Bewertung</td>
        </tr>
      </thead>

      <tbody>
        {{#each currentCourses}}
          <tr>
            <td>
              {{#if logo}}
              <a href="{{ pathFor route='course.show' _id=course }}"><img src="{{logo}}" alt="" class="img-thumbnail img-responsive" style="height: 40px;"></a>
              {{else}}
              <a href="{{ pathFor route='course.show' _id=course }}"><img src="/iconTeach.png" alt="" class=" img-thumbnail img-responsive" style="height: 40px;"></a>
              {{/if}}
            </td>
            <td><a href="{{ pathFor route='course.show' _id=course }}">{{title}}</a></td>
            <td>{{courseDate}}</td>
            <td><span class="rateit" data-rateit-value="{{rating}}" data-rateit-ispreset="true" data-rateit-readonly="true"></span></td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    {{/if}}

    {{#if elapsedCourses}}
    <h3>Besuchte Kurse</h3>
    <table class='table table-striped'>
    <thead>
        <tr>
          <td></td>
          <td>Titel</td>
          <td>Datum</td>
          <td>Meine Bewertung</td>
          <td>Bewertung</td>
        </tr>
      </thead>

      <tbody>
        {{#each elapsedCourses}}
          <tr>
            <td>
              {{#if logo}}
              <a href="{{ pathFor route='course.show' _id=course }}"><img src="{{logo}}" alt="" class="img-thumbnail img-responsive" style="height: 40px;"></a>
              {{else}}
              <a href="{{ pathFor route='course.show' _id=course }}"><img src="/iconTeach.png" alt="" class=" img-thumbnail img-responsive" style="height: 40px;"></a>
              {{/if}}
            </td>
            <td><a href="{{ pathFor route='course.show' _id=course }}">{{title}}</a></td>
            <td>{{courseDate}}</td>
            <td>
              {{#if myRating _id}}
                <span style="color: green;"><i class="glyphicon glyphicon-ok"></i> Bewertung abgegeben</span> 
                <a href="#" class="rateCourse" title="Bewertung Ã„ndern"><i class="glyphicon glyphicon-edit"></i> </a>
              {{else}}
                <a href="#" class="rateCourse" title="Jetzt bewerten"><span style="color: red;"><i class="glyphicon glyphicon-flag"></i> Jetzt Bewerten</span></a>
              {{/if}}
            </td>
            <td><span class="rateit" data-rateit-value="{{rating}}" data-rateit-ispreset="true" data-rateit-readonly="true"></span></td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    {{/if}}
  </div>
</template>

<!--  /////////////////////////////////////////////////// --> 

<template name="ratingModal">
  <div id="ratingModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">Kurs Bewerten</h4>
        </div>
        <div class="modal-body">
          <input type="range" value="0" step="0.5" id="backing">
          <div class="rateit rateitModal" data-rateit-backingfld="#backing" data-rateit-resetable="true" data-rateit-ispreset="true">
          </div>
          <button type="button" class="btn btn-default" id="saveRating"><i class="glyphicon glyphicon-save"></i> Speichern</button>

        </div>
      </div>
    </div>
  </div>
</template>