<template name="courses">
  <div class="container notHome">
    <div class="row">
        {{#each courses}}
        <div class="col-lg-8 col-lg-offset-2">
          <div class="well all-courses-wrapper">
            {{> course}}
            <a href="{{ pathFor route='course.show' data=getPost }}">check me out!</a>
          </div>
        </div>
        {{/each}}
    </div>
  </div>
</template>

<!--  /////////////////////////////////////////////////// --> 

<template name="courseDetail">
 {{> paymentModal }}
  <div class="container notHome">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        {{> course}}
        {{#if canEdit}}
          <div>Course inquiries (course owner only)</div>
          {{#if error}}
            <div class="alert alert-danger">{{error}}</div>
          {{/if}}
          <hr>
          {{#each inquired}}
            <form class="form-inline" role="form">
              {{#each inquiredDates}}
                <label class="radio-inline">
                  <input type="radio" name="{{../instanceId}}" value="{{this}}"> {{this}}
                </label>
              {{/each}}
              <button type="button" class="btn btn-default confirmDateButton" name="{{instanceId}}" >Confirm</button>
            </form>
            <hr>
          {{/each}}
        {{/if}}
        {{> pinboard}}
      </div>
      <div class="col-md-3">
        {{#if canEdit}}
          <button type="submit" class="btn btn-primary" id="editCourseButton">Edit course</button>
        {{/if}}
        <button type="button" class="btn btn-danger" id="inquireCourseDatesButton">Inquire dates</button>
        <div class="list-group">
          <a href="#" class="list-group-item disabled">Join course at dates:</a>
          {{#each current}}
            <a href="#" name="{{this.instanceId}}" class="joinCourseButton list-group-item"><span class="badge">{{this.participants.length}}</span>{{this.courseDate}}</a>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
  <!-- <button type="button" class="btn btn-danger" id="remove">remove</button> -->
</template>

<!--  /////////////////////////////////////////////////// --> 

<template name="course">
  <h4>{{title}}</h4>
  <p>{{description}}</p>
  <p>{{maxParticipants}}</p>
  <a href="{{ pathFor 'userProfile.show' _id=this.owner }}">{{ownerName}}</a>
  <p>{{rating}}</p>
  <p>{{comments}}</p>
</template>

<!--  /////////////////////////////////////////////////// --> 

<template name="pinboard">
  {{#if isParticipant}}
    {{#with pinboard}}
      <h3>Pinnbrett</h3>

        {{#each messages}}
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">{{userName}}</h3>
              <small>{{timestamp}}</small>
            </div>
            <div class="panel-body">
              {{message}}
            </div>
          </div>
        {{/each}}

      <form class="form-inline" role="form" id="pinboardForm{{_id}}">
        <div class="form-group">
          <input type="text" class="form-control" id="inputField{{_id}}" title="Gib Deine Nachricht hier ein" placeholder="Deine neue Nachricht">
        </div>
        <button type="button" class="btn btn-default submitMessageButton">Senden</button>
      </form>
    {{/with}}
  {{/if}}

  {{#if isOwner}}
    {{#if pinboards}}
    <div role="tabpanel">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        {{#each pinboards}}
          <li role="presentation"><a href="#{{_id}}" aria-controls="{{_id}}" role="tab" data-toggle="tab">{{name}}</a></li>
        {{/each}}
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        {{#each pinboards}}
          <div role="tabpanel" class="tab-pane fade" id="{{_id}}">
            <h3>Pinnbrett</h3>
              {{#each messages}}
                <div class="panel panel-default">
                  <div class="panel-heading">
                    <h3 class="panel-title">{{userName}}</h3>
                    <small>{{timestamp}}</small>
                  </div>
                  <div class="panel-body">
                    {{message}}
                  </div>
                </div>
              {{/each}}
            <div>
            <form class="form-inline" role="form" id="pinboardForm{{_id}}">
              <div class="form-group">
                <input type="text" class="form-control" id="inputField{{_id}}" title="Gib Deine Nachricht hier ein" placeholder="Deine neue Nachricht">
              </div>
              <button type="button" class="btn btn-default submitMessageButton">Senden</button>
            </form>
            </div>
          </div>
        {{/each}}
      </div>
    </div>
    {{/if}}
  {{/if}}
</template>